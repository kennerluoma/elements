$(function(){const t=$(window);if(t.scrollTop()>100)$(`.header`).addClass(`small`);t.on(`scroll`,()=>{t.scrollTop()>100?$(`.header`).addClass(`small`):$(`.header`).removeClass(`small`)});const o=o=>{const s=o.map(function(){return this}).toArray();let n;const a=$(`#lightbox`),i=$(`#lightbox>:not(#close)`),e=$(`#lightbox>.caption`),c=$(`#lightbox>#close`);const l=200;let r;const f=t=>{const o=$(t);if(o.height()<o.width()){a.addClass(`column`).removeClass(`row`)}else{a.addClass(`row`).removeClass(`column`)}i.attr(`src`,o.attr(`src`)).attr(`alt`,o.attr(`alt`));e.text(o.attr(`alt`))};$(s).on(`click`,function(){n=s.indexOf(this);r=t.scrollTop();a.addClass(`open`);a.css({top:`${r-l}px`,paddingTop:`${l+40}px`,paddingBottom:`${l+40}px`,height:`${t.height()+l*2}px`,maxHeight:`${t.height()+l*2}px`,opacity:`1`});f($(this));t.on(`scroll`,()=>{let o=Math.abs(t.scrollTop()-r);let s=(l-o)/(l-100)>1?1:(l-o)/100;o>l?d(false):i.css({opacity:`${s}`})})});$(document).on(`keydown`,t=>{const o=t.keyCode;if((o===39||o===37)&&a.hasClass(`open`)){o===39&&n<s.length-1?++n:o===37&&n>0?--n:d();if(i.is(`:animated`)){i.stop(true,false)}i.animate({opacity:0},200,()=>{f(s[n])}).animate({opacity:1},200)}else if(o===27&&a.hasClass(`open`)){d()}});const d=(t=true)=>{if(t){a.animate({opacity:0},200,function(){i.removeAttr(`style`);a.removeClass(`open`)})}else{a.removeClass(`open`).css({opacity:`0`});i.removeAttr(`style`)}};$(`#close`).on(`click`,()=>{d()})};o($(`.image-container img`))});